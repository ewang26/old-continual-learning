#!/bin/bash
#SBATCH -n 1
#SBATCH -N 1
#SBATCH -p gpu
#SBATCH -t 0-01:00
#SBATCH --mem=10
#SBATCH --gres=gpu:1
#SBATCH --job-name=continual_learning
#SBATCH -o logs/train_eval_%j.out
#SBATCH -e logs/train_eval_%j.err

export PYTORCH_CUDA_ALLOC_CONF=max_split_size_mb:128

# Activate the virtual environment
source /n/home12/thb489/continual-learning/myenv/bin/activate

# Change to the main project directory
cd /n/home12/thb489/continual-learning

# Run the Python scripts
python main_batch.py --config configs/test/config_cifar10_grad_eval.yaml
python main_batch.py --config configs/test/config_cifar10_train.yaml
#python save_similarity_block_v2.py --config configs/grad_eval/cifar10_rest.yaml

# Deactivate the virtual environment
deactivate